<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Handelsspiel – Elandor</title>
  <style>
    body {
      background: #f4f1e5;
      font-family: 'Georgia', serif;
      margin: 0;
    }
    header {
      background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Parchment_texture.jpg/800px-Parchment_texture.jpg');
      background-size: cover;
      padding: 10px;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: center;
      background: #6b4f2d;
    }
    nav button {
      background: #8b5e3c;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin: 5px;
      border-radius: 8px;
    }
    nav button:hover {
      background: #a97144;
    }
    /* Container für die Weltkarte */
    #weltkarteContainer {
        margin: 10px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: #fffdf7;
        padding: 10px;
        text-align: center;
    }
    #karte { /* Das SVG-Element für die Weltkarte */
      width: 100%;
      height: auto;
      display: block;
    }

    #inhalt {
      padding: 20px;
      background: #fffdf7;
      border: 1px solid #ddd;
      margin: 10px;
      border-radius: 8px;
    }
    .stadt-button {
      fill: #3366cc;
      cursor: pointer;
      transition: fill 0.2s, r 0.2s;
    }
    .stadt-button:hover {
      fill: #5588ee;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    td, th {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f2f2f2;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 5px 10px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 14px;
      margin: 2px 2px;
      cursor: pointer;
      border-radius: 4px;
    }
    button:hover {
      background: #45a049;
    }
    button:disabled {
        background: #cccccc;
        cursor: not-allowed;
    }
    input[type="number"] {
        width: 60px;
        padding: 5px;
        margin-right: 5px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    /* NEUE STYLES FÜR SCHIFFSMENÜ */
    .schiff-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    .schiff-karte {
        background: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
        box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    .schiff-karte h3 {
        margin-top: 0;
        color: #333;
    }
    .schiff-info p {
        margin: 5px 0;
        font-size: 0.9em;
    }
    .schiff-aktionen {
        margin-top: 15px;
        text-align: center;
    }
    .kaufen-button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
        width: 100%;
        box-sizing: border-box;
    }
    .kaufen-button:hover {
        background: #0056b3;
    }
    .kaufen-button:disabled {
        background: #cccccc;
        cursor: not-allowed;
    }
    /* Stil für den Löschen-Button */
    .loeschen-button {
        background-color: #dc3545; /* Rot */
    }
    .loeschen-button:hover {
        background-color: #c82333; /* Dunkleres Rot */
    }
  </style>
</head>
<body>

<header>
  <h1>Handelsspiel – Elandor</h1>
</header>

<nav>
  <button onclick="zeigeMenue('uebersicht')">Übersicht</button>
  <button onclick="zeigeMenue('handel')">Handel</button>
  <button onclick="zeigeMenue('gebaeude')">Gebäude</button>
  <button onclick="zeigeMenue('schiffe')">Schiffe</button>
  <button class="loeschen-button" onclick="loescheSpielstand()">Spielstand löschen</button>
</nav>

<div id="spielerStatus" style="padding: 10px; background: #e0d8c1; border: 1px solid #c0b8a1; margin: 10px; border-radius: 8px;">
  <h3>Dein Status:</h3>
  <p>Gold: <span id="goldAnzeige"></span></p>
  <p>Level: <span id="levelAnzeige"></span> (<span id="xpAnzeige"></span> XP)</p>
  <p>Ruf: <span id="rufAnzeige"></span> (<span id="rufRangAnzeige"></span>)</p>
  <p>Aktuelle Stadt: <span id="aktuelleStadtAnzeige">Keine</span></p>
  <p>Ladekapazität: <span id="ladekapazitaetAnzeige"></span></p>
</div>

<div id="weltkarteContainer">
    <h2>Weltkarte</h2>
    <p>Klicke auf eine Stadt auf der Karte, um ihre Details anzuzeigen und Handel zu treiben.</p>
    <svg id="karte" viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
      <image href="https://raw.githubusercontent.com/ebrius0/Handelsspiel/main/file_0000000020d861fb8c92bec003f416bd%20(1).png" x="0" y="0" height="600" width="1000" preserveAspectRatio="xMidYMid slice"/>
    </svg>
</div>

<div id="inhalt">
  <p>Wähle eine Stadt auf der Karte, um zu beginnen.</p>
</div>

<script>
  // --- SPIELERDATEN (Standardwerte für neues Spiel) ---
  const INITIALE_SPIELER_DATEN = {
    gold: 5000,
    level: 1,
    xp: 0,
    ruf: 0,
    aktuelleStadt: null,
    schiffeBesitz: [],
    inventar: {},
    gebaeude: {} // Bleibt eine leere Struktur in dieser Version
  };

  let SPIELER_DATEN = { ...INITIALE_SPIELER_DATEN };

  // --- RUF-RANG-DEFINITIONEN ---
  const RUF_RANG_DEFINITIONEN = {
    '-5': { name: 'Geächteter Händler', beschreibung: 'Ein Händler, der das Vertrauen aller verloren hat. Gerüchte über seine unehrlichen Machenschaften eilen ihm voraus.' },
    '-4': { name: 'Wucherer Händler', beschreibung: 'Seine Gier kennt keine Grenzen. Städte meiden ihn, und man munkelt, er würde seine Kunden gnadenlos ausnehmen.' },
    '-3': { name: 'Zwielichtiger Händler', beschreibung: 'Man traut ihm nicht über den Weg. Seine Geschäfte sind oft undurchsichtig und grenzen an Betrug.' },
    '-2': { name: 'Raffgieriger Händler', beschreibung: 'Er handelt nur zu seinem eigenen Vorteil und kümmert sich nicht um die Bedürfnisse der Gemeinschaft.' },
    '-1': { name: 'Schmarotzer Händler', beschreibung: 'Man weiß nie, woran man bei ihm ist. Kleine Vergehen und das Ausnutzen von Notlagen sind ihm nicht fremd.' },
    '0': { name: 'Unbeachteter Händler', beschreibung: 'Ein durchschnittlicher Händler, der seine Geschäfte macht, ohne groß aufzufallen.' },
    '+1': { name: 'Redlicher Händler', beschreibung: 'Er ist bekannt für seine harte Arbeit und ehrlichen Handel. Ein solider Partner.' },
